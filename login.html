<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>E-Clientes - Iniciar Sesión</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/login.css">

  <script>
    // Silenciar toda la consola excepto errores críticos
    console.log = () => {};
    console.info = () => {};
    console.debug = () => {};
    console.warn = () => {};
    // Mantener console.error para errores importantes
  </script>
</head>
<body>
  <div class="login-container">
    <!-- Panel izquierdo - Formulario -->
    <div class="login-card">
      <div class="login-header">
        
        <div class="logo">
          <img src="assets/01 IMAGOTIPO RODALL BN PNG.png" alt="Rodall Oseguera" />
        </div>
        <h1>E-Clientes</h1>
        <p>Acceso al Sistema de Referencias</p>
      </div>

      <form id="loginForm" class="login-form">
        <div id="loginError" class="error-message"></div>

        <div class="form-group">
          <label for="username">  
            <span class="material-icons">person</span>
            Usuario
          </label>
          <input type="text" id="username" name="username" required autocomplete="username">
        </div>

        <div class="form-group">
          <label for="password">
            <span class="material-icons">lock</span>
            Contraseña
          </label>
          <input type="password" id="password" name="password" required autocomplete="current-password">
          <button type="button" class="toggle-password" onclick="togglePassword()">
            <span class="material-icons">visibility</span>
          </button>
        </div>

        <div class="form-options">
          <div class="remember-me">
            <input type="checkbox" id="rememberMe" name="rememberMe">
            <label for="rememberMe">Recordar sesión</label>
          </div>
          <a href="#" class="forgot-password">¿Olvidaste tu contraseña?</a>
        </div>

        <button type="submit" class="login-button">
          <span class="material-icons">login</span>
          Iniciar Sesión
        </button>
      </form>

      <div class="login-footer">
        <p>Si no tienes credenciales de acceso, contacta al administrador del sistema.</p>
        <p>&copy; 2025 <a href="#">Agencia Aduanal Rodall Oseguera</a></p>
      </div>
    </div>

    <!-- Panel derecho - Información -->
    <div class="login-info">
      <h2>Sistema de Referencias</h2>
      <p>Plataforma integral para la gestión de clientes y referencias comerciales de la Agencia Aduanal Rodall Oseguera.</p>
      
      <ul>
        <li>
          <span class="material-icons">check_circle</span>
          Gestión completa de expedientes
        </li>
        <li>
          <span class="material-icons">check_circle</span>
          Seguimiento en tiempo real
        </li>
        <li>
          <span class="material-icons">check_circle</span>
          Reportes y estadísticas
        </li>
        <li>
          <span class="material-icons">check_circle</span>
          Acceso seguro y confiable
        </li>
      </ul>
    </div>
  </div>

  <!-- ✅ NUEVO: Modal para cambio de contraseña en primer ingreso -->
  <div id="changePasswordModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>
          <span class="material-icons" style="font-size: 28px; color: var(--primary-light); margin-right: 8px;">security</span>
          Cambio de Contraseña Requerido
        </h2>
        <p>Por seguridad, debe establecer una nueva contraseña en su primer ingreso al sistema.</p>
      </div>
      
      <div class="modal-body">
        <div id="modalError" class="modal-error-message"></div>
        <div id="modalSuccess" class="modal-success-message"></div>
        
        <form id="changePasswordForm" class="password-form">
          <div class="form-group">
            <label for="newPassword">
              <span class="material-icons">lock_outline</span>
              Nueva Contraseña
            </label>
            <div class="password-input-container">
              <input type="password" id="newPassword" name="newPassword" required>
              <button type="button" class="toggle-password-modal" onclick="togglePasswordModal('newPassword', this)">
                <span class="material-icons">visibility</span>
              </button>
            </div>
          </div>

          <div class="form-group">
            <label for="confirmPassword">
              <span class="material-icons">lock</span>
              Confirmar Contraseña
            </label>
            <div class="password-input-container">
              <input type="password" id="confirmPassword" name="confirmPassword" required>
              <button type="button" class="toggle-password-modal" onclick="togglePasswordModal('confirmPassword', this)">
                <span class="material-icons">visibility</span>
              </button>
            </div>
          </div>

          <!-- Requisitos de contraseña -->
          <div class="password-requirements">
            <h4>Requisitos de contraseña:</h4>
            <div class="requirement" id="req-length">
              <span class="material-icons">close</span>
              Mínimo 8 caracteres
            </div>
            <div class="requirement" id="req-number">
              <span class="material-icons">close</span>
              Al menos 1 número
            </div>
            <div class="requirement" id="req-special">
              <span class="material-icons">close</span>
              Al menos 1 carácter especial
            </div>
            <div class="requirement" id="req-match">
              <span class="material-icons">close</span>
              Las contraseñas coinciden
            </div>
          </div>

          <div class="modal-buttons">
            <button type="submit" class="modal-button" id="changePasswordBtn">
              <span class="material-icons">check</span>
              Cambiar Contraseña
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script src="/js/login.js"></script>
</body>
</html>