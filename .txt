 2. BUSCAR ESTAS FUNCIONES EN TU api.js Y AGREGAR 1 LÍNEA EN CADA UNA:
// ===============================

// 🔍 BUSCA tu función que se llama algo como "consultarReferencias()" o "btnConsultar.onclick"
// AGREGAR ESTA LÍNEA AL FINAL (cuando la consulta sea exitosa):
/*
function consultarReferencias() {
    // ... tu código existente ...
    
    // AL FINAL, AGREGAR:
    logger.log('REFERENCIAS_BUSQUEDA', '', `Resultados: ${referenciasCompletas.length}`);
}
*/

// 🔍 BUSCA tu función "mostrarModalReferencia()" o similar
// AGREGAR ESTA LÍNEA AL FINAL:
/*
function mostrarModalReferencia(indexEnListaMostrada) {
    // ... tu código existente ...
    
    // AL FINAL, AGREGAR:
    logger.log('REFERENCIA_HISTORIAL', referenciaOriginal.Referencia, 'Consulta historial');
}
*/

// 🔍 BUSCA tu función "generarBibliotecaModal()" 
// AGREGAR ESTA LÍNEA cuando se cargan documentos exitosamente:
/*
function generarBibliotecaModal(referenciaOriginal) {
    // ... tu código existente ...
    
    // BUSCAR donde dice algo como "data.documents.length" y AGREGAR DESPUÉS:
    logger.log('REFERENCIA_BIBLIOTECA', numeroReferencia, `Documentos: ${data.documents.length}`);
}
*/

// 🔍 BUSCA tu función "verDocumentoModal()" 
// AGREGAR ESTA LÍNEA AL PRINCIPIO:
/*
function verDocumentoModal(referenciaId, docNombre) {
    // AGREGAR AL PRINCIPIO:
    logger.log('DOCUMENTO_VISUALIZACION', referenciaId, docNombre);
    
    // ... resto de tu código existente ...
}
*/

// 🔍 BUSCA tu función "descargarDocumentoModal()"
// AGREGAR ESTA LÍNEA AL PRINCIPIO:
/*
function descargarDocumentoModal(referenciaId, docNombre) {
    // AGREGAR AL PRINCIPIO:
    logger.log('DOCUMENTO_DESCARGA', referenciaId, docNombre);
    
    // ... resto de tu código existente ...
}
*/

// ===============================
// RESUMEN DE CAMBIOS EN api.js:
// ===============================

/*
📁 api.js
├── [Tu código existente...]
├── 
├── function consultarReferencias() {
│   └── + logger.log('REFERENCIAS_BUSQUEDA', '', `Resultados: ${referenciasCompletas.length}`);
├── 
├── function mostrarModalReferencia() {
│   └── + logger.log('REFERENCIA_HISTORIAL', referenciaOriginal.Referencia, 'Consulta historial');
├── 
├── function generarBibliotecaModal() {
│   └── + logger.log('REFERENCIA_BIBLIOTECA', numeroReferencia, `Documentos: ${data.documents.length}`);
├── 
├── function verDocumentoModal() {
│   └── + logger.log('DOCUMENTO_VISUALIZACION', referenciaId, docNombre);
├── 
├── function descargarDocumentoModal() {
│   └── + logger.log('DOCUMENTO_DESCARGA', referenciaId, docNombre);
├── 
└── [AL FINAL]