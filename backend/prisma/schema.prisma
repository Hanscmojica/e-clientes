generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = "mysql://root:12345@localhost:3306/test_db"
}

model BP_01_USUARIO {
  nId01Usuario            Int                       @id @default(autoincrement())
  sNombre                 String
  sApellidoPaterno        String
  sApellidoMaterno        String
  sUsuario                String                    @unique(map: "BP_01_USUARIO_sUsuario_key")
  sEmail                  String                    @unique(map: "BP_01_USUARIO_sEmail_key")
  sPassword               String
  bActivo                 Boolean                   @default(false)
  dFechaCreacion          DateTime                  @default(now())
  dFechaActualizacion     DateTime?
  sUsuarioImg             String?
  perfilesUsuario         BP_04_PERFIL_USUARIO[]    @relation("UsuarioPerfiles")
  bp_06_registro_consulta bp_06_registro_consulta[]

  @@map("bp_01_usuario")
}

model BP_02_PERFIL {
  nId02Perfil         Int                    @id @default(autoincrement())
  sNombre             String                 @unique(map: "BP_02_PERFIL_sNombre_key")
  sDescripcion        String
  dFechaCreacion      DateTime               @default(now())
  dFechaActualizacion DateTime?
  perfilesUsuario     BP_04_PERFIL_USUARIO[] @relation("PerfilUsuarios")
  perfilesPermiso     BP_05_PERFIL_PERMISO[] @relation("PerfilPermisos")

  @@map("bp_02_perfil")
}

model BP_03_PERMISO {
  nId03Permiso        Int                    @id @default(autoincrement())
  sNombre             String                 @unique(map: "BP_03_PERMISO_sNombre_key")
  sDescripcion        String
  dFechaCreacion      DateTime               @default(now())
  dFechaActualizacion DateTime?
  perfilesPermiso     BP_05_PERFIL_PERMISO[] @relation("PermisoPerfiles")

  @@map("bp_03_permiso")
}

model BP_04_PERFIL_USUARIO {
  nId04PerfilUsuario  Int           @id @default(autoincrement())
  nId01Usuario        Int
  nId02Perfil         Int
  dFechaCreacion      DateTime      @default(now())
  dFechaActualizacion DateTime?
  usuario             BP_01_USUARIO @relation("UsuarioPerfiles", fields: [nId01Usuario], references: [nId01Usuario], map: "BP_04_PERFIL_USUARIO_nId01Usuario_fkey")
  perfil              BP_02_PERFIL  @relation("PerfilUsuarios", fields: [nId02Perfil], references: [nId02Perfil], map: "BP_04_PERFIL_USUARIO_nId02Perfil_fkey")

  @@index([nId01Usuario], map: "BP_04_PERFIL_USUARIO_nId01Usuario_fkey")
  @@index([nId02Perfil], map: "BP_04_PERFIL_USUARIO_nId02Perfil_fkey")
  @@map("bp_04_perfil_usuario")
}

model BP_05_PERFIL_PERMISO {
  nId05PerfilPermiso  Int           @id @default(autoincrement())
  nId03Permiso        Int
  nId02Perfil         Int
  nLeer               Boolean       @default(false)
  nCrear              Boolean       @default(false)
  nEditar             Boolean       @default(false)
  nBorrar             Boolean       @default(false)
  dFechaCreacion      DateTime      @default(now())
  dFechaActualizacion DateTime?
  perfil              BP_02_PERFIL  @relation("PerfilPermisos", fields: [nId02Perfil], references: [nId02Perfil], map: "BP_05_PERFIL_PERMISO_nId02Perfil_fkey")
  permiso             BP_03_PERMISO @relation("PermisoPerfiles", fields: [nId03Permiso], references: [nId03Permiso], map: "BP_05_PERFIL_PERMISO_nId03Permiso_fkey")

  @@index([nId02Perfil], map: "BP_05_PERFIL_PERMISO_nId02Perfil_fkey")
  @@index([nId03Permiso], map: "BP_05_PERFIL_PERMISO_nId03Permiso_fkey")
  @@map("bp_05_perfil_permiso")
}

model bp_06_registro_consulta {
  nId06RegistroConsulta Int           @id @default(autoincrement())
  nId01Usuario          Int
  sFolioReferencia      String        @db.VarChar(255)
  sDetalleConsulta      String?       @db.Text
  sTipoConsulta         String        @db.VarChar(50)
  bExito                Boolean?      @default(true)
  sError                String?       @db.Text
  dFechaConsulta        DateTime?     @default(now()) @db.DateTime(0)
  sIpUsuario            String?       @db.VarChar(50)
  bp_01_usuario         BP_01_USUARIO @relation(fields: [nId01Usuario], references: [nId01Usuario], onDelete: NoAction, onUpdate: NoAction, map: "bp_06_registro_consulta_ibfk_1")

  @@index([dFechaConsulta], map: "idx_registro_consulta_fecha")
  @@index([sTipoConsulta], map: "idx_registro_consulta_tipo")
  @@index([nId01Usuario], map: "idx_registro_consulta_usuario")
}
